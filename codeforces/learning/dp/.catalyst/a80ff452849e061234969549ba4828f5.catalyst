{"title":"B. Bear and Compressing","contestId":"653","problemIndex":"B","timeLimit":"2 seconds","memLimit":"256 megabytes","inputFormat":"standard input","outputFormat":"standard output","problemHtml":"<p>Limak is a little polar bear. Polar bears hate long strings and thus they like to compress them. You should also know that Limak is so young that he knows only first six letters of the English alphabet: &apos;<span class=\"tex-font-style-tt\">a</span>&apos;, &apos;<span class=\"tex-font-style-tt\">b</span>&apos;, &apos;<span class=\"tex-font-style-tt\">c</span>&apos;, &apos;<span class=\"tex-font-style-tt\">d</span>&apos;, &apos;<span class=\"tex-font-style-tt\">e</span>&apos; and &apos;<span class=\"tex-font-style-tt\">f</span>&apos;.</p><p>You are given a set of <span class=\"tex-span\"><i>q</i></span> possible operations. Limak can perform them in any order, any operation may be applied any number of times. The <span class=\"tex-span\"><i>i</i></span>-th operation is described by a string <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span> of length two and a string <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span> of length one. No two of <span class=\"tex-span\"><i>q</i></span> possible operations have the same string <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span>.</p><p>When Limak has a string <span class=\"tex-span\"><i>s</i></span> he can perform the <span class=\"tex-span\"><i>i</i></span>-th operation on <span class=\"tex-span\"><i>s</i></span> if the first two letters of <span class=\"tex-span\"><i>s</i></span> match a two-letter string <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span>. Performing the <span class=\"tex-span\"><i>i</i></span>-th operation removes first two letters of <span class=\"tex-span\"><i>s</i></span> and inserts there a string <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span>. See the notes section for further clarification.</p><p>You may note that performing an operation decreases the length of a string <span class=\"tex-span\"><i>s</i></span> exactly by <span class=\"tex-span\">1</span>. Also, for some sets of operations there may be a string that cannot be compressed any further, because the first two letters don&apos;t match any <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span>.</p><p>Limak wants to start with a string of length <span class=\"tex-span\"><i>n</i></span> and perform <span class=\"tex-span\"><i>n</i>&#x2009;-&#x2009;1</span> operations to finally get a one-letter string &quot;<span class=\"tex-font-style-tt\">a</span>&quot;. In how many ways can he choose the starting string to be able to get &quot;<span class=\"tex-font-style-tt\">a</span>&quot;? Remember that Limak can use only letters he knows.</p>","inSpecsHtml":"<div class=\"section-title\">Input</div><p>The first line contains two integers <span class=\"tex-span\"><i>n</i></span> and <span class=\"tex-span\"><i>q</i></span> (<span class=\"tex-span\">2&#x2009;&#x2264;&#x2009;<i>n</i>&#x2009;&#x2264;&#x2009;6</span>, <span class=\"tex-span\">1&#x2009;&#x2264;&#x2009;<i>q</i>&#x2009;&#x2264;&#x2009;36</span>)&#xA0;&#x2014; the length of the initial string and the number of available operations.</p><p>The next <span class=\"tex-span\"><i>q</i></span> lines describe the possible operations. The <span class=\"tex-span\"><i>i</i></span>-th of them contains two strings <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span> and <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span> (<span class=\"tex-span\">|<i>a</i><sub class=\"lower-index\"><i>i</i></sub>|&#x2009;=&#x2009;2,&#x2009;|<i>b</i><sub class=\"lower-index\"><i>i</i></sub>|&#x2009;=&#x2009;1</span>). It&apos;s guaranteed that <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub>&#x2009;&#x2260;&#x2009;<i>a</i><sub class=\"lower-index\"><i>j</i></sub></span> for <span class=\"tex-span\"><i>i</i>&#x2009;&#x2260;&#x2009;<i>j</i></span> and that all <span class=\"tex-span\"><i>a</i><sub class=\"lower-index\"><i>i</i></sub></span> and <span class=\"tex-span\"><i>b</i><sub class=\"lower-index\"><i>i</i></sub></span> consist of only first six lowercase English letters.</p>","outSpecsHtml":"<div class=\"section-title\">Output</div><p>Print the number of strings of length <span class=\"tex-span\"><i>n</i></span> that Limak will be able to transform to string &quot;<span class=\"tex-font-style-tt\">a</span>&quot; by applying only operations given in the input.</p>","noteHtml":"<div class=\"section-title\">Note</div><p>In the first sample, we count initial strings of length <span class=\"tex-span\">3</span> from which Limak can get a required string &quot;<span class=\"tex-font-style-tt\">a</span>&quot;. There are <span class=\"tex-span\">4</span> such strings: &quot;<span class=\"tex-font-style-tt\">abb</span>&quot;, &quot;<span class=\"tex-font-style-tt\">cab</span>&quot;, &quot;<span class=\"tex-font-style-tt\">cca</span>&quot;, &quot;<span class=\"tex-font-style-tt\">eea</span>&quot;. The first one Limak can compress using operation <span class=\"tex-span\">1</span> two times (changing &quot;<span class=\"tex-font-style-tt\">ab</span>&quot; to a single &quot;<span class=\"tex-font-style-tt\">a</span>&quot;). The first operation would change &quot;<span class=\"tex-font-style-tt\">abb</span>&quot; to &quot;<span class=\"tex-font-style-tt\">ab</span>&quot; and the second operation would change &quot;<span class=\"tex-font-style-tt\">ab</span>&quot; to &quot;<span class=\"tex-font-style-tt\">a</span>&quot;.</p><p>Other three strings may be compressed as follows: </p><ul> <li> &quot;<span class=\"tex-font-style-tt\">cab</span>&quot; <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/70a0795f45d32287dba0eb83fc4a3f470c6e5537.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"> &quot;<span class=\"tex-font-style-tt\">ab</span>&quot; <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/70a0795f45d32287dba0eb83fc4a3f470c6e5537.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"> &quot;<span class=\"tex-font-style-tt\">a</span>&quot; </li><li> &quot;<span class=\"tex-font-style-tt\">cca</span>&quot; <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/70a0795f45d32287dba0eb83fc4a3f470c6e5537.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"> &quot;<span class=\"tex-font-style-tt\">ca</span>&quot; <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/70a0795f45d32287dba0eb83fc4a3f470c6e5537.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"> &quot;<span class=\"tex-font-style-tt\">a</span>&quot; </li><li> &quot;<span class=\"tex-font-style-tt\">eea</span>&quot; <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/70a0795f45d32287dba0eb83fc4a3f470c6e5537.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"> &quot;<span class=\"tex-font-style-tt\">ca</span>&quot; <img align=\"middle\" class=\"tex-formula\" src=\"https://espresso.codeforces.com/70a0795f45d32287dba0eb83fc4a3f470c6e5537.png\" style=\"max-width: 100.0%;max-height: 100.0%;\"> &quot;<span class=\"tex-font-style-tt\">a</span>&quot; </li></ul><p>In the second sample, the only correct initial string is &quot;<span class=\"tex-font-style-tt\">eb</span>&quot; because it can be immediately compressed to &quot;<span class=\"tex-font-style-tt\">a</span>&quot;.</p>","sampleTestcases":[{"id":1612202166781,"input":"3 5\nab a\ncc c\nca a\nee c\nff d\n","output":"4\n"},{"id":1612202166782,"input":"2 8\naf e\ndc d\ncc f\nbc b\nda b\neb a\nbb b\nff c\n","output":"1\n"},{"id":1612202166783,"input":"6 2\nbb a\nba a\n","output":"0\n"}],"submitUrl":"https://codeforces.com/problemset/submit","language":"c++"}